<svelte:head>
  <title>Ross Hill - Website and Portfolio</title>
</svelte:head>
<Header/>
<PostControls bind:sort bind:searchString/>
<Posts posts={posts}/>
<script>
  export default {
    components: {
      Header: "../components/Header.html",
      Posts: "../components/Posts.html",
      PostControls: "../components/PostControls.html"
    },
    data() {
			return {
        sort: "old",
        searchString: ""
			};
		},
    preload(data) {
      const sort = data.query.sort || "new";
      const searchString = data.query.searchString || "";

      return this.fetch(`index.json?sort=${sort}&searchString=${searchString}`)
        .then(r => r.json())
        .then(posts => {
          return { posts };
        });
    }
  };
</script>
